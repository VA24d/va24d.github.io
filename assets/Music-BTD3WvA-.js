import{P as s,m as a,y as t,Q as i,z as e,R as l,B as n,F as r,S as v,n as c,s as o,k as d,i as u,T as p,g as k,U as x,M as b,t as m,l as g,N as h,a as y,O as f,w as _,V as A,W as w,X as P,c as S,f as U,v as R,x as T}from"./index-DJodtMPt.js";const C=s({default:{title:"Music",menu:{"about-music":{title:"About Music",breakAfter:!0},preferences:{title:"Settings...",breakAfter:!0},quit:{title:"Quit Music"}}},file:{title:"File",menu:{new:{title:"New"},open:{title:"Open..."}}},edit:{title:"Edit",menu:{undo:{title:"Undo"},redo:{title:"Redo"}}},song:{title:"Song",menu:{}},view:{title:"View",menu:{}},controls:{title:"Controls",menu:{}},account:{title:"Account",menu:{}},window:{title:"Window",menu:{}},help:{title:"Help",menu:{}}});async function M(s,a,t,i){const{error:e}=await v.from("songs").insert([k(a)]);e?alert("Error uploading song: "+e.message):(alert("Song uploaded!"),r(t,!1),r(a,{title:"",artist:"",album:"",mp3_url:"",cover_url:""},!0),await i())}var V=(s,a)=>r(a,!k(a)),q=c('<button class="admin-btn s-evxkr9"> </button>'),F=c('<div class="upload-form s-evxkr9"><h3>Upload Song</h3> <input placeholder="Title" class="s-evxkr9"/> <input placeholder="Artist" class="s-evxkr9"/> <input placeholder="Album" class="s-evxkr9"/> <input placeholder="MP3 URL" class="s-evxkr9"/> <input placeholder="Cover URL" class="s-evxkr9"/> <button>Submit</button></div>'),L=c('<p class="loading">Loading...</p>'),j=(s,a,t)=>a(k(t)),E=(s,a,t,i)=>{r(a,k(t),!0),i(k(t).id)},N=(s,a,t)=>{s.stopPropagation(),a(k(t).id)},H=c('<button class="delete-btn">ğŸ—‘ï¸</button>'),O=c('<div><div class="album-artist-cell s-evxkr9"><img alt="art" class="album-art s-evxkr9"/> <div class="info s-evxkr9"><div class="album-title s-evxkr9"> </div> <div class="artist-name s-evxkr9"> </div> <div class="rating s-evxkr9">â˜†â˜†â˜†â˜†â˜†</div></div></div> <div class="title-cell s-evxkr9"><span class="track-num s-evxkr9"></span> <span class="check s-evxkr9">âœ“</span> <span class="song-title s-evxkr9"> </span> <!></div></div>'),Q=(s,a,t)=>a(k(t)),W=c('<div class="queue-item s-evxkr9"><img alt="art" class="s-evxkr9"/> <div class="info s-evxkr9"><div class="title s-evxkr9"> </div> <div class="artist s-evxkr9"> </div></div> <button class="more-btn s-evxkr9">â€¢â€¢â€¢</button></div>'),$=c('<div class="music-app s-evxkr9"><div class="sidebar s-evxkr9"><div class="traffic-lights-spacer s-evxkr9"></div> <div class="search-box s-evxkr9"><span class="search-icon">ğŸ”</span> <input type="text" placeholder="Search" class="s-evxkr9"/></div> <div class="nav-group s-evxkr9"><div class="nav-item s-evxkr9"><span class="icon">ğŸ </span> Home</div> <div class="nav-item s-evxkr9"><span class="icon">ğŸ†•</span> New</div> <div class="nav-item s-evxkr9"><span class="icon">ğŸ“»</span> Radio</div></div> <div class="nav-group s-evxkr9"><div class="group-title s-evxkr9">Library</div> <div class="nav-item s-evxkr9"><span class="icon">ğŸ“Œ</span> Pins</div> <div class="nav-item s-evxkr9"><span class="icon">ğŸ•’</span> Recently Added</div> <div class="nav-item s-evxkr9"><span class="icon">ğŸ¤</span> Artists</div> <div class="nav-item s-evxkr9"><span class="icon">ğŸ’¿</span> Albums</div> <div class="nav-item active s-evxkr9"><span class="icon">ğŸµ</span> Songs</div></div> <div class="nav-group s-evxkr9"><div class="group-title s-evxkr9">Store</div> <div class="nav-item s-evxkr9"><span class="icon">ğŸ›ï¸</span> iTunes Store</div></div> <div class="nav-group s-evxkr9"><div class="group-title s-evxkr9">Devices</div> <div class="nav-item s-evxkr9"><span class="icon">ğŸ“±</span> Vijay\'s iPad</div> <div class="nav-item s-evxkr9"><span class="icon">ğŸ“±</span> Vijay\'s iPhone</div></div> <div class="nav-group s-evxkr9"><div class="group-title s-evxkr9">Playlists</div> <div class="nav-item s-evxkr9"><span class="icon">playlist</span> All Playlists</div> <div class="nav-item s-evxkr9"><span class="icon">â­</span> Favourite Songs</div></div> <!> <div class="user-profile s-evxkr9"><div class="avatar s-evxkr9">VA</div> <span class="username">VA</span></div></div> <div class="main-content s-evxkr9"><div class="content-header s-evxkr9"><h2 class="s-evxkr9">Songs</h2> <div class="header-controls s-evxkr9"><button class="icon-btn">â˜°</button> <div class="filter-search s-evxkr9"><span class="icon">ğŸ”</span> <input type="text" placeholder="Find in Songs" class="s-evxkr9"/></div></div></div> <div class="content-subheader s-evxkr9"><div class="column-header artist-col">Album by Artist</div> <div class="column-header title-col">Title</div></div> <!> <div class="songs-container s-evxkr9"><!></div> <div class="floating-player s-evxkr9"><div class="player-controls s-evxkr9"><button class="control-btn s-evxkr9">ğŸ”€</button> <button class="control-btn s-evxkr9">â®</button> <button class="play-pause-btn s-evxkr9"> </button> <button class="control-btn s-evxkr9">â­</button> <button class="control-btn s-evxkr9">ğŸ”</button></div> <div class="apple-logo s-evxkr9">ï£¿</div> <div class="extra-controls s-evxkr9"><button class="control-btn s-evxkr9">ğŸ’¬</button> <button class="control-btn s-evxkr9">â‰¡</button> <button class="control-btn s-evxkr9">ğŸ“¡</button> <button class="control-btn s-evxkr9">ğŸ”Š</button></div></div></div> <div class="right-sidebar s-evxkr9"><div class="top-buttons s-evxkr9"><button class="pill-btn s-evxkr9">â™¾ AutoPlay</button> <button class="pill-btn red s-evxkr9">â™¾ AutoMix</button></div> <div class="sidebar-header s-evxkr9"><h3 class="s-evxkr9">Continue Playing</h3> <button class="clear-btn s-evxkr9">Clear</button></div> <div class="queue-list"></div></div></div>');function z(s,c){a(c,!0);const[T,z]=A(),B=()=>p(w,"$adminState",T),D=()=>p(x,"$audioPlayer",T);let G=t(i([])),X=t(null),I=t(null),J=t(!0),K=t(!1),Y=t(i({title:"",artist:"",album:"",mp3_url:"",cover_url:""})),Z=t(""),ss=t(0);async function as(){r(J,!0);const{data:s,error:a}=await v.from("songs").select("*").order("created_at",{ascending:!1});a?console.error(a):r(G,s||[],!0),r(J,!1)}async function ts(s){x.update(a=>({...a,currentTrack:s,isPlaying:!0})),r(X,s,!0),await is(s.id)}async function is(s){r(I,null),r(Z,""),r(ss,0);const{data:a,error:t}=await v.from("reviews").select("*").eq("song_id",s).single();t&&"PGRST116"!==t.code?console.error(t):a&&(r(I,a,!0),r(Z,a.content,!0),r(ss,a.rating,!0))}async function es(s){if(!confirm("Are you sure?"))return;const{error:a}=await v.from("songs").delete().eq("id",s);a?alert("Error deleting song: "+a.message):await as()}e(()=>{l.menus=C}),n(async()=>{await as()});var ls=$(),ns=d(ls),rs=o(d(ns),14),vs=s=>{var a=q();a.__click=[V,K];var t=d(a);m(()=>h(t,k(K)?"Cancel Upload":"Upload Song")),y(s,a)};u(rs,s=>{B().isAuthenticated&&s(vs)});var cs=o(ns,2),os=o(d(cs),4),ds=s=>{var a=F(),t=o(d(a),2),i=o(t,2),e=o(i,2),l=o(e,2),n=o(l,2);o(n,2).__click=[M,Y,K,as],P(t,()=>k(Y).title,s=>k(Y).title=s),P(i,()=>k(Y).artist,s=>k(Y).artist=s),P(e,()=>k(Y).album,s=>k(Y).album=s),P(l,()=>k(Y).mp3_url,s=>k(Y).mp3_url=s),P(n,()=>k(Y).cover_url,s=>k(Y).cover_url=s),y(s,a)};u(os,s=>{k(K)&&B().isAuthenticated&&s(ds)});var us=o(os,2),ps=d(us),ks=s=>{var a=L();y(s,a)},xs=s=>{var a=S(),t=U(a);b(t,17,()=>k(G),f,(s,a,t)=>{var i=O();let e;i.__dblclick=[j,ts,a],i.__click=[E,X,a,is];var l=d(i),n=d(l),r=o(n,2),v=d(r),c=d(v),p=o(v,2),x=d(p),b=o(l,2),f=d(b);f.textContent=t+1;var _=o(f,4),A=d(_),w=o(_,2),P=s=>{var t=H();t.__click=[N,es,a],y(s,t)};u(w,s=>{B().isAuthenticated&&s(P)}),m(s=>{e=R(i,1,"song-row s-evxkr9",null,e,s),g(n,"src",k(a).cover_url||"https://placehold.co/40"),h(c,k(a).album||"Unknown Album"),h(x,k(a).artist),h(A,k(a).title)},[()=>{var s,t;return{playing:(null==(s=D().currentTrack)?void 0:s.id)===k(a).id,selected:(null==(t=k(X))?void 0:t.id)===k(a).id}}]),y(s,i)}),y(s,a)};u(ps,s=>{k(J)?s(ks):s(xs,!1)});var bs=o(us,2),ms=d(bs),gs=o(d(ms),4);gs.__click=()=>x.update(s=>({...s,isPlaying:!s.isPlaying}));var hs=d(gs),ys=o(cs,2),fs=o(d(ys),4);b(fs,21,()=>k(G).slice(0,10),f,(s,a)=>{var t=W();t.__click=[Q,ts,a];var i=d(t),e=o(i,2),l=d(e),n=d(l),r=o(l,2),v=d(r);m(()=>{g(i,"src",k(a).cover_url||"https://placehold.co/40"),h(n,k(a).title),h(v,k(a).artist)}),y(s,t)}),m(()=>h(hs,D().isPlaying?"â¸":"â–¶")),y(s,ls),_(),z()}T(["click","dblclick"]);export{z as default};
